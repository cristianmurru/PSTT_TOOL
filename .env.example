# ========================================
# PSTT TOOL - ENVIRONMENT VARIABLES
# ========================================
# 
# Questo file contiene tutte le variabili d'ambiente disponibili.
# Copiare questo file in .env e configurare i valori appropriati.
#
# IMPORTANTE: Il file .env NON deve essere committato in git!
# ========================================

# ========================================
# APPLICATION SETTINGS
# ========================================
DEBUG=false
LOG_LEVEL=INFO
HOST=127.0.0.1
PORT=8000

# Controllo pulsante riavvio app
# In produzione è consigliato impostare a false per sicurezza
ENABLE_APP_RESTART=true

# ========================================
# DATABASE CREDENTIALS
# ========================================
# Le credenziali seguono il pattern: DB_USER_<NOME_CONNESSIONE> e DB_PASS_<NOME_CONNESSIONE>
# I nomi connessione devono corrispondere a quelli definiti in connections.json

# === COLLAUDO ===
DB_USER_A00-CDG-Collaudo=your_oracle_user
DB_PASS_A00-CDG-Collaudo=your_oracle_password

DB_USER_A01-BOSC-Collaudo=your_oracle_user
DB_PASS_A01-BOSC-Collaudo=your_oracle_password

DB_USER_A02-TT2_UFFICIO=your_postgres_user
DB_PASS_A02-TT2_UFFICIO=your_postgres_password

# === PRODUZIONE ===
DB_USER_C00-CDG-Produzione=your_oracle_user
DB_PASS_C00-CDG-Produzione=your_oracle_password

DB_USER_C01-BOSC-Produzione=your_oracle_user
DB_PASS_C01-BOSC-Produzione=your_oracle_password

DB_USER_C02-TT2_STAMPA=your_sqlserver_user
DB_PASS_C02-TT2_STAMPA=your_sqlserver_password

# ========================================
# EXPORT SETTINGS
# ========================================
EXPORT_RETENTION_DAYS=30
EXPORT_COMPRESSION=true

# ========================================
# SCHEDULER SETTINGS
# ========================================
SCHEDULER_TIMEZONE=Europe/Rome
DAILY_REPORTS_HOUR=6

# Query execution timeouts (in seconds)
scheduler_query_timeout_sec=900
scheduler_write_timeout_sec=300

# ========================================
# SMTP CONFIGURATION (per notifiche email)
# ========================================
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USERNAME=noreply@example.com
SMTP_PASSWORD=your_smtp_password
SMTP_FROM=noreply@example.com
SMTP_USE_TLS=true

# Daily Report Configuration
DAILY_REPORT_ENABLED=false
DAILY_REPORT_CRON=0 19 * * *
DAILY_REPORT_RECIPIENTS=admin@example.com
DAILY_REPORT_CC=manager@example.com
DAILY_REPORT_SUBJECT=Report schedulazioni PSTT

# ========================================
# KAFKA CONFIGURATION
# ========================================

# Kafka Feature Flag
KAFKA_ENABLED=false

# === Kafka Connection ===
# Lista server Kafka (comma-separated): host1:port1,host2:port2
KAFKA_BOOTSTRAP_SERVERS=localhost:9092

# Protocollo di sicurezza: PLAINTEXT, SSL, SASL_PLAINTEXT, SASL_SSL
KAFKA_SECURITY_PROTOCOL=PLAINTEXT

# Meccanismo SASL (richiesto se security_protocol è SASL_*): PLAIN, SCRAM-SHA-256, SCRAM-SHA-512, GSSAPI, OAUTHBEARER
# KAFKA_SASL_MECHANISM=PLAIN
# KAFKA_SASL_USERNAME=pstt-producer
# KAFKA_SASL_PASSWORD=secure-password-here

# === SSL Configuration (se security_protocol è SSL o SASL_SSL) ===
# Path assoluti ai certificati
# KAFKA_SSL_CAFILE=/path/to/ca-cert.pem
# KAFKA_SSL_CERTFILE=/path/to/client-cert.pem
# KAFKA_SSL_KEYFILE=/path/to/client-key.pem

# === Kafka Producer Settings ===
# Tipo compressione: none, gzip, snappy, lz4, zstd
KAFKA_COMPRESSION_TYPE=snappy

# Batch size in bytes (default: 16KB)
KAFKA_BATCH_SIZE=16384

# Tempo di attesa per accumulare batch in ms (default: 10ms)
KAFKA_LINGER_MS=10

# Dimensione massima richiesta in bytes (default: 1MB)
KAFKA_MAX_REQUEST_SIZE=1048576

# Timeout richieste in millisecondi (default: 30s)
KAFKA_REQUEST_TIMEOUT_MS=30000

# Abilita idempotenza producer (evita duplicati)
KAFKA_ENABLE_IDEMPOTENCE=true

# Backoff tra retry in millisecondi
KAFKA_RETRY_BACKOFF_MS=100

# Max richieste in-flight simultanee (1-10)
KAFKA_MAX_IN_FLIGHT_REQUESTS=5

# Acknowledgment mode: 0, 1, 'all'
KAFKA_ACKS=all

# === Kafka Application Settings ===
# Topic di default per messaggi Kafka
KAFKA_DEFAULT_TOPIC=pstt-data

# Numero di messaggi per batch applicativo
KAFKA_MESSAGE_BATCH_SIZE=100

# Numero massimo retry su errore
KAFKA_MAX_RETRIES=3

# Intervallo health check in secondi
KAFKA_HEALTH_CHECK_INTERVAL_SEC=60

# === Kafka Logging ===
# Livello log per operazioni Kafka: DEBUG, INFO, WARNING, ERROR
KAFKA_LOG_LEVEL=INFO

# Log payload completo dei messaggi (solo per debug, può generare log molto grandi)
KAFKA_LOG_PAYLOAD=false

# ========================================
# ESEMPI CONFIGURAZIONI KAFKA
# ========================================

# === Esempio: Kafka Locale (Development) ===
# KAFKA_ENABLED=true
# KAFKA_BOOTSTRAP_SERVERS=localhost:9092
# KAFKA_SECURITY_PROTOCOL=PLAINTEXT
# KAFKA_DEFAULT_TOPIC=pstt-dev

# === Esempio: Kafka Collaudo (con SASL_SSL) ===
# KAFKA_ENABLED=true
# KAFKA_BOOTSTRAP_SERVERS=kafka-collaudo.example.com:9093
# KAFKA_SECURITY_PROTOCOL=SASL_SSL
# KAFKA_SASL_MECHANISM=PLAIN
# KAFKA_SASL_USERNAME=pstt-collaudo
# KAFKA_SASL_PASSWORD=collaudo-password
# KAFKA_SSL_CAFILE=C:/certs/ca-cert.pem
# KAFKA_DEFAULT_TOPIC=pstt-collaudo

# === Esempio: Kafka Produzione (con SASL_SSL e SCRAM) ===
# KAFKA_ENABLED=true
# KAFKA_BOOTSTRAP_SERVERS=kafka-prod-1.example.com:9093,kafka-prod-2.example.com:9093,kafka-prod-3.example.com:9093
# KAFKA_SECURITY_PROTOCOL=SASL_SSL
# KAFKA_SASL_MECHANISM=SCRAM-SHA-256
# KAFKA_SASL_USERNAME=pstt-producer-prod
# KAFKA_SASL_PASSWORD=super-secure-production-password
# KAFKA_SSL_CAFILE=C:/certs/prod/ca-cert.pem
# KAFKA_SSL_CERTFILE=C:/certs/prod/client-cert.pem
# KAFKA_SSL_KEYFILE=C:/certs/prod/client-key.pem
# KAFKA_DEFAULT_TOPIC=pstt-traces
# KAFKA_COMPRESSION_TYPE=snappy
# KAFKA_MESSAGE_BATCH_SIZE=500

# ========================================
# NOTES
# ========================================
# 
# Per maggiori informazioni su Kafka:
# - Documentazione: docs/KAFKA_SETUP.md
# - Piano integrazione: KAFKA_INTEGRATION_PLAN.md
#
# Troubleshooting:
# - Verificare connettività: telnet kafka-host 9092
# - Test connessione: POST /api/kafka/test
# - Health check: GET /api/kafka/health
#
# Performance tuning:
# - Per throughput alto: aumentare KAFKA_BATCH_SIZE e KAFKA_LINGER_MS
# - Per latenza bassa: ridurre KAFKA_LINGER_MS
# - Per affidabilità massima: KAFKA_ACKS=all e KAFKA_ENABLE_IDEMPOTENCE=true
#
